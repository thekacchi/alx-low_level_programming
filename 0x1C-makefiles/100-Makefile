# Variables
CC = gcc
SRC = main.c school.c
OBI = $(SRC:.c=.o)
NAME = school
BM = rm -f
AFLAGS = -Wall -Werror -Wextra -pedantic
AB = gcc

# Default Target
all: $(NAME)

# Rule to build the executable
$(NAME): $(OBI)
	$(BM) -o $@ $(OBI) $(AFLAGS)

# Rule to build .o files from .c files
.c.o:
	$(AB) -c $< -o $@ $(AFLAGS)

# Clean rule
clean:
	@-$(BM) *~ $(NAME)

# Object files clean rule
oclean:
	@-$(BM) $(OBI)

# Full clean rule
fclean: clean oclean

# Force recompilation of all source files
re: fclean all

# Ensure that these rules never fail, even if files are absent
.PHONY: all clean oclean fclean re

# Don't compile if m.h is missing
$(OBI): m.h

# $(RM) usage
RM = rm -f
